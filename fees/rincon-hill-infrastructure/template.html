<!-- ko if: state === 'form' -->
<form>
    <div class="form-group">
        <h4>Net New Construction</h4>

        <label for="newRes">New Residential (GFA)</label>
        <input type="number" class="form-control" id="newRes" data-bind="value: fee.newRes, valueUpdate: 'keyup'">

        <hr>

        <h4>Change of Use</h4>

        <label for="nonResToRes">Non-Residential to Residential (GFA)</label>
        <input type="number" class="form-control" id="nonResToRes" data-bind="value: fee.nonResToRes, valueUpdate: 'keyup'">

        <label for="pdrToRes">PDR to Residential (GFA)</label>
        <input type="number" class="form-control" id="pdrToRes" data-bind="value: fee.pdrToRes, valueUpdate: 'keyup'">
    </div>
</form>
<!-- /ko -->

<!-- ko if: state === 'report' && fee.triggered() -->
<table class="table">
    <thead>
        <tr>
            <th>
                <h4>New Construction</h4>
            </th>
            <th>GFA</th>
            <th></th>
            <th>Fee per GFA</th>
            <th></th>
            <th>Assessed Fee</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th scope="row">Residential</th>
            <td>
                <span data-bind="numericText: fee.newRes"></span> GFA
            </td>
            <td>*</td>
            <td>
                <span data-bind="dollarsText: fee.feePerNewRes"></span>/GFA
            </td>
            <td>=</td>
            <td>
                <span data-bind="dollarsText: fee.newRes() * fee.feePerNewRes"></span>
            </td>
        </tr>
        <tr>
            <th>
                <h4>Change of Use</h4>
            </th>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <th scope="row">Non-Residential to Residential</th>
            <td>
                <span data-bind="numericText: fee.nonResToRes"></span> GFA
            </td>
            <td>*</td>
            <td>
                <span data-bind="dollarsText: fee.feePerNonResToRes"></span>/GFA
            </td>
            <td>=</td>
            <td>
                <span data-bind="dollarsText: fee.nonResToRes() * fee.feePerNonResToRes"></span>
            </td>
        </tr>
        <tr>
            <th scope="row">PDR to Residential</th>
            <td>
                <span data-bind="numericText: fee.pdrToRes"></span> GFA
            </td>
            <td>*</td>
            <td>
                <span data-bind="dollarsText: fee.feePerPDRToRes"></span>/GFA
            </td>
            <td>=</td>
            <td>
                <span data-bind="dollarsText: fee.pdrToRes() * fee.feePerPDRToRes"></span>
            </td>
        </tr>
    </tbody>
</table>
<!-- /ko -->

<!-- ko if: state === 'fee-input' && fee.triggered() -->
<div class="calc-container">
    <div>
        <div class="pb-2 pt-8">New Construction</div>
        <div class="space-y-2">
            <div class="flex justify-between items-center border-b pb-2">
                <div>Net New Residential GFA</div>
                <input 
                    class="line-item-input"
                    type="number" 
                    placeholder="0" 
                    min="0"
                    data-bind="value: fee.newRes, valueUpdate: 'keyup'"
                >
            </div>
            <div class="flex justify-between items-center border-b pb-2">
                <div>Fee per GFA</div>
                <div>
                    x 
                    <span data-bind="dollarsText: fee.feePerNewRes"></span>
                </div>
            </div>
            <div class="flex justify-between items-center">
                <div>Subtotal</div>
                <div data-bind="dollarsText: fee.newRes() * fee.feePerNewRes"></div>
            </div>
        </div>

        <div class="pb-2 pt-8">Change of Use</div>
        <div class="space-y-2">
            <div class="flex justify-between items-center border-b pb-2">
                <div>Non-Residential to Residential GFA</div>
                <input 
                    class="line-item-input"
                    type="number" 
                    placeholder="0" 
                    min="0"
                    data-bind="value: fee.nonResToRes, valueUpdate: 'keyup'"
                >
            </div>
            <div class="flex justify-between items-center border-b pb-2">
                <div>Fee per GFA</div>
                <div>
                    x 
                    <span data-bind="dollarsText: fee.feePerNonResToRes"></span>
                </div>
            </div>
            <div class="flex justify-between items-center">
                <div>Subtotal</div>
                <div data-bind="dollarsText: fee.nonResToRes() * fee.feePerNonResToRes"></div>
            </div>
        </div>

        <div class="space-y-2 pt-4">
            <div class="flex justify-between items-center border-b pb-2">
                <div>PDR to Residential GFA</div>
                <input 
                    class="line-item-input"
                    type="number" 
                    placeholder="0" 
                    min="0"
                    data-bind="value: fee.pdrToRes, valueUpdate: 'keyup'"
                >
            </div>
            <div class="flex justify-between items-center border-b pb-2">
                <div>Fee per GFA</div>
                <div>
                    x 
                    <span data-bind="dollarsText: fee.feePerPDRToRes"></span>
                </div>
            </div>
            <div class="flex justify-between items-center">
                <div>Subtotal</div>
                <div data-bind="dollarsText: fee.pdrToRes() * fee.feePerPDRToRes"></div>
            </div>
        </div>

        <div class="space-y-2 pt-8">
            <div class="flex justify-between items-center">
                <div>Total Fee</div>
                <div data-bind="dollarsText: fee.calculatedFee"></div>
            </div>
        </div>
    </div>
</div>


<!-- /ko -->